{% extends "base.html" %}
{% block content %}
<div class="container">
  <h2>{{ item.name }}</h2>
  <p><strong>Prezzo:</strong> â‚¬{{ item.price }}</p>
  <p><strong>Descrizione:</strong> {{ item.description }}</p>
  {% if item.image %}
    <img src="{{ item.image }}" alt="{{ item.name }}" style="max-width: 300px;">
  {% endif %}
  <p class="text-muted" alt="{{ item.avg_stars|floatformat:1 }}">
      <h3 class="px-4">{{ item.n_review }}/5</h3>
      <div>
      {% for i in "12345" %}
      {% with i_num=i|add:"0" %}
          {% if item.avg_stars >= i_num %}
              <i class="bi bi-star-fill text-warning"></i>
          {% elif item.avg_stars >= i_num|floatformat:"0"|add:"-0.5" %}
              <i class="bi bi-star-half text-warning"></i>
          {% else %}
              <i class="bi bi-star text-warning"></i>
          {% endif %}
      {% endwith %}
      {% endfor %}
      </div>
      ({{ item.n_review }} recensioni)
  </p>
  <form action="{% url 'add_to_cart' item.id %}" method="post">
    {% csrf_token %}
    <button type="submit" class="btn btn-primary mt-3 mb-1">Aggiungi al carrello</button>
  </form>
  <a href="{% url 'items' %}">Torna ai prodotti</a>
</div>
{% endblock %}